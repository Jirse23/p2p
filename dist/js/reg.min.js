$(function(){var e=$("#username"),r=$("#pwd"),l=$("#en-pwd"),a=$("#nickname"),s=$("#email"),t=!1,n=!1,o=!1,u=!1,c=!1;function d(r,e,a){var l=r.val(),e=e.test(l);return e?r.css("border","1px solid green").next().html("").removeClass("error"):r.css("border","1px solid red").next().html(a).addClass("error"),e}e.blur(function(){d(e,/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9_-]){2,10}$/,"2~10的中文,数字,字母,-")&&$.ajax({url:"http://127.0.0.1:8848/accrepeat.php",type:"get",data:"username="+e.val(),success:function(r){t="fail"===r?(e.css("border","1px solid red").next().html("该用户名重复了").addClass("error"),!1):(e.css("border","1px solid green").next().html("").removeClass("error"),!0)}})}),r.blur(function(){n=d(r,/[a-zA-Z0-9_-]{3,10}$/,"3~10的数字字母或者-")}),l.blur(function(){var r=$("#en-pwd").val(),e=$("#pwd").val(),a=/[a-zA-Z0-9_-]{3,10}$/.test(r);o=a?r==e?(l.css("border","1px solid green").next().html("").removeClass("error"),!0):(l.css("border","1px solid red").next().html("两次密码不一致,请重新输入").addClass("error"),!1):(l.css("border","1px solid red").next().html("密码不正确").addClass("error"),!1)}),a.blur(function(){u=d(a,/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9_-]){2,10}$/,"2~10的中文,数字,字母,-")}),s.blur(function(){c=d(s,/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/,"邮箱的格式不正确")}),$("#reg-btn").click(function(){if(!(t&&n&&o&&u&&c))return e.trigger("blur"),r.blur(),s.blur(),l.blur(),a.blur(),!1;$.ajax({url:"http://127.0.0.1:8848/reg.php",type:"POST",data:{username:e.val(),pwd:r.val(),nickname:a.val(),email:s.val()},success:function(r){"ok"===r?(alert("恭喜您!"+e.val()+"注册成功!"),location.href="./login.html"):alert("未成功,请重试~~~~")}})})});