$(function(){var n=$("#nickname"),t=$("#email"),l=$("#phone"),o=!1,u=!1,i=!1;function e(e,a,r){var n=e.val(),a=a.test(n);return a?e.css("border","1px solid green").next().html("").removeClass("error"):e.css("border","1px solid red").next().html(r).addClass("error"),a}n.blur(function(){o=e(n,/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9_-]){2,10}$/,"2~10的中文,数字,字母,-")}),t.blur(function(){u=e(t,/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/,"邮箱的格式不正确")}),l.blur(function(){i=e(l,/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/,"手机号格式不正确")}),$("#update-btn").click(function(){var e=n.val(),a=t.val(),r=l.val();if(!(o&&u&&i))return!1;$.ajax({url:"http://127.0.0.1:8848/updateuser.php",type:"POST",data:{id:localStorage.getItem("uid"),nickname:e,email:a,phone:r},success:function(e){"ok"==e?(alert("更新资料成功！"),location.href="/#personal"):alert("请稍后再试~~~")}})})});